
<!-- 0. revise 4 files -->
<!-- 1. Enter your name  , FE DONE--> 
<!-- 2. store name(Dad) DONE -->
<!-- 3. Display score , FE DONE-- -->
<!-- 4.update score in  backend 300 to 0 (count , BE) DONE---->
<!-- 5. Display clue button , move to dictionary , FE-->
<!-- clue logic: 
1. clikc button similar to others
2. onclick, call api
3. main - cll gamelogic.showclue
4.implement show clue
5. WORDS[targetword]
6. display back
BE-->
<!-- 6. if clue is asked, reduce 50 , BE-->
<!-- 7. Show leaderboard (Top 5 scores)  Dad DONE-->

<!DOCTYPE html>
<html>
<head>
  <title>Wordle Game - Abheek & Akira's Fun Zone</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      color: #333;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    h1 {
      text-align: center;
      color: #4ecdc4;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .back-button {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 15px;
      cursor: pointer;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      font-weight: bold;
      text-decoration: none;
      display: inline-block;
      margin-bottom: 20px;
      transition: transform 0.2s;
    }
    
    .back-button:hover {
      transform: scale(1.05);
    }
    
    .game-controls {
      text-align: center;
      margin-bottom: 30px;
    }
    
    input[type="text"] {
      padding: 15px;
      font-size: 18px;
      border: 3px solid #4ecdc4;
      border-radius: 15px;
      margin: 10px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      text-align: center;
      text-transform: uppercase;
    }
    
    button {
      background: linear-gradient(45deg, #4ecdc4, #44a08d);
      color: white;
      border: none;
      padding: 15px 25px;
      font-size: 16px;
      border-radius: 15px;
      cursor: pointer;
      margin: 5px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      font-weight: bold;
      transition: transform 0.2s;
    }
    
    button:hover {
      transform: scale(1.05);
    }
    
    .reset-btn {
      background: linear-gradient(45deg, #ff6b6b, #ee5a52);
    }

    .clue-btn {
        background: linear-gradient(45deg, #ff7e00, #ff4500);
      }
    
    .letter {
      display: inline-block;
      width: 50px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      margin: 3px;
      border: 3px solid #ccc;
      border-radius: 10px;
      font-weight: bold;
      font-size: 24px;
      font-family: 'Comic Sans MS', cursive, sans-serif;
    }
    .correct {
      background-color: #6aaa64;
      color: white;
      border-color: #6aaa64;
    }
    .partial {
      background-color: #c9b458;
      color: white;
      border-color: #c9b458;
    }
    .incorrect {
      background-color: #787c7e;
      color: white;
      border-color: #787c7e;
    }
    .answered {
      background-color: #6aaa64;
      width: 500px;
      color: white;
      border-radius: 15px;
      padding: 15px;
      margin: 10px 0;
      font-size: 20px;
    }
    .unanswered {
      background-color: #787c7e;
      width: 500px;
      color: white;
      border-radius: 15px;
      padding: 15px;
      margin: 10px 0;
      font-size: 20px;
    }
    
    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 18px;
    }
    
    .leaderboard-entry {
      background: rgba(255, 255, 255, 0.8);
      margin: 5px auto;
      padding: 10px;
      border-radius: 10px;
      max-width: 300px;
      font-weight: bold;
      color: #333;
    }
    
    .leaderboard-rank {
      color: #ff6b6b;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="/" class="back-button">ğŸ  Back to Home</a>
    <h1>ğŸ¯ Wordle Game by Abheek and Akira! ğŸ¯</h1>

    <!-- Leaderboard Section -->

    <div class="leaderboard-section" style="background: rgba(78, 205, 196, 0.1); border-radius: 15px; padding: 20px; margin-bottom: 20px;">  
      <h2 style="color: #4ecdc4; text-align: center; margin-bottom: 15px;">ğŸ† Top Scores ğŸ†</h2>
      <div id="leaderboard" style="text-align: center;"></div>
    </div>



    <div class="player-info">
      <input type="text" id="playerName" placeholder="Enter your name" style="margin-bottom: 10px;">
      <div id="rank" style="font-size: 20px; color: #4ecdc4; font-weight: bold; margin-bottom: 15px;"></div>
      <div id="scoreDisplay" style="font-size: 20px; color: #4ecdc4; font-weight: bold; margin-bottom: 15px;"></div>
    </div>
    
    <div class="game-controls">
      <input type="text" id="guess" minlength="4" maxlength="6" placeholder="Enter your guess">
      <br>
      <button onclick = makeGuess()>ğŸ® Guess!</button>
      <button class="reset-btn" onclick="resetGame()">ğŸ”„ New Game</button>
      <button class="clue-btn"  onclick="showClue()"> ğŸ’¡ Show Clue!(100 points will be deducted)</button>
      <div id="clue" style="font-size: 18px; color: #4ecdc4; font-weight: bold; margin-top: 15px;"></div>
    </div>
    
    <div id="result"></div>
  </div>

  <script>
    async function loadLeaderboard() {
      try {
        
        if (!playerName) {
          alert('Please enter your name first! ğŸ˜Š');
          return;
        }
        
        const response = await fetch('/leaderboard',  {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({playerName})
        });
        
        const data = await response.json();
        const leaderboard = data.leaderboard;
        
        let leaderboardHTML = '';
        if (leaderboard.length === 0) {
          leaderboardHTML = '<div style="color: #999; font-style: italic;">No scores yet! Be the first to play! ğŸ®</div>';
        } else {
          leaderboard.forEach((entry, index) => {
            const rank = index + 1;
            const trophy = rank === 1 ? 'ğŸ¥‡' : rank === 2 ? 'ğŸ¥ˆ' : rank === 3 ? 'ğŸ¥‰' : 'ğŸ†';
            
            leaderboardHTML += `
              <div class="leaderboard-entry">
                <span class="leaderboard-rank">${trophy} #${rank}</span> 
                ${entry.name} - ${entry.score} points
              </div>
            `;
          });
        }
        
        document.getElementById('leaderboard').innerHTML = leaderboardHTML;

        const rankHTML = `ğŸ’¡ Your overall Rank: ${data.clue}`;

        document.getElementById('rank').innerHTML = rankHTML;
        
        
      } catch (error) {
        console.error('Error loading leaderboard:', error);
      }
    }

    async function makeGuess() {
      const guess = document.getElementById('guess').value;
      const playerName = document.getElementById('playerName').value;
      
      if (!playerName) {
        alert('Please enter your name first! ğŸ˜Š');
        return;
      }
      
      if (!guess) {
        alert('Please enter a word! ğŸ˜Š');
        return;
      }
      
      const response = await fetch('/guess', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({guess, playerName})
      });
      const data = await response.json();
      document.getElementById('result').innerHTML = data.result.join('');
      document.getElementById('guess').value = '';
      
      // Update score display
      if (data.score !== undefined) {
        document.getElementById('scoreDisplay').innerHTML = `ğŸ¯ ${playerName}'s Score: ${data.score}`;
        // Reload leaderboard after a successful game
        loadLeaderboard();
      }
    }

    async function resetGame() {
      await fetch('/reset', {method: 'POST'});
      
      document.getElementById('result').innerHTML = '<p style="color: #4ecdc4; font-size: 20px;">ğŸ‰ New word selected! Good luck! ğŸ€</p>';
      document.getElementById('guess').value = '';
      document.getElementById('scoreDisplay').innerHTML = '';
      document.getElementById('clue').innerHTML = '';

    }

      
    async function showClue() {
      const playerName = document.getElementById('playerName').value;
      
      if (!playerName) {
        alert('Please enter your name first! ğŸ˜Š');
        return;
      }
      
      const response = await fetch('/clue', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({playerName})
      });

      const data = await response.json();
      const clueHTML = `ğŸ’¡ Clue: ${data.clue}`;
      document.getElementById('clue').innerHTML = clueHTML;
      
      // Update score display
      if (data.score !== undefined) {
        document.getElementById('scoreDisplay').innerHTML = `ğŸ¯ ${playerName}'s Score: ${data.score}`;
      }
    }

    // Allow Enter key to submit guess
    document.getElementById('guess').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        makeGuess();
      }
    });
    
    // Load leaderboard when page loads
    window.addEventListener('load', loadLeaderboard);
  </script>
</body>
</html>
